<!DOCTYPE html>
<html>
    <head>
        <title>
            Akademia
        </title>

        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <meta name="viewport" content="initial-scale=1.0, maximum-scale=5.0, width=device-width" />

        <link href="/assets/Fav icon/favicon.ico" rel="shortcut icon" />

        <link rel="stylesheet" type="text/css" href="/akademia/styles/akademia.css" />


    </head>
    <body>

        <div class="background">

            <header class="header">
                <img src="/akademia/assets/Akademia Logo wit.png" alt="akademia logo" width="290" height="176" class="logo">
            </header>
            
            <div class="intro">
                <h1 class="name">
                    Johan Lubbe
                </h1>

                <h3 class="position">
                    Studentewerwer
                </h3>

                    <!--button to contact-->
                <div class="button">
                    <button name="contact" class="buttonContent" id="akademiaJohanLubbe">
                        <details>
                            <summary class="buttonContent">
                                Kontak Johan Lubbe
                            </summary>

                            <ul>
                                <li>
                                    Akademia - Johan Lubbe
                                </li>
                                <li>
                                    <a href="tel:+27861222888">
                                        0861 222 888
                                    </a>
                                </li>
                                <li>
                                    <a href="mailto:johan@akademia.ac.za">
                                        johan@akademia.ac.za
                                    </a>
                                </li>

                            </ul>
                        </details>

                        <div>
                            <button type="button" id="johanContactButton">
                                Save to Contact                                
                            </button>
                        </div>
                    </button>
                </div>


            <div>
                <fieldset>
                    <div>
                        <label for="cardInfoEl">cardInfo</label>
                        <input type="text" id="cardInfoEl" />
                    </div>
                    <div>
                        <label for="emailEl">email</label>
                        <input type="text" id="emailEl" />
                    </div>
                    <div>
                        <label for="nameEl">name</label>
                        <input type="text" id="nameEl" />
                    </div>
                    <div>
                        <label for="orgEl">org</label>
                        <input type="text" id="orgEl" />
                    </div>
                    <div>
                        <label for="titleEl">title</label>
                        <input type="text" id="titleEl" />
                    </div>
                    <div>
                        <label for="telEl">tel</label>
                        <input type="text" id="telEl" />
                    </div>
                    <div>
                        <label for="addressEl">address</label>
                        <input type="text" id="addressEl" />
                    </div>
                    <div>
                        <label for="fileEl">Clique aqui para carregar imagem</label>
                        <input type="file" id="fileEl" hidden /><br />
                        <img width="100" alt="PrÃ©via da imagem..." id="previewEl" />
                    </div>
                    <button id="downloadEl">Save</button>
                    </fieldset>
            </div>


        <footer>
            <div class="footer">
                <span></span>

            </div>
        </footer>

        <script>
            'use strict';
            function downloadToFile(content, filename, contentType) {
                const a = document.createElement('a');
                const file = new Blob([content], { type: contentType });
            
                a.href = URL.createObjectURL(file);
                a.download = filename;
                a.click();
            
                URL.revokeObjectURL(a.href);
            }
            
            function previewFile(event) {
                let reader = new FileReader();
                let file = event.target.files[0];
            
                reader.readAsDataURL(file);
                reader.onloadend = () => (previewEl.src = reader.result);
            }
            
            const makeVCardVersion = () => `VERSION:3.0`;
            const makeVCardInfo = (info) => `N:${info}`;
            const makeVCardName = (name) => `FN:${name}`;
            const makeVCardOrg = (org) => `ORG:${org}`;
            const makeVCardTitle = (title) => `TITLE:${title}`;
            const makeVCardPhoto = (img) => `PHOTO;TYPE=JPEG;ENCODING=b:[${img}]`;
            const makeVCardTel = (phone) => `TEL;TYPE=WORK,VOICE:${phone}`;
            const makeVCardAdr = (address) => `ADR;TYPE=WORK,PREF:;;${address}`;
            const makeVCardEmail = (email) => `EMAIL:${email}`;
            const makeVCardTimeStamp = () => `REV:${new Date().toISOString()}`;
            
            function makeVCard() {
                let vcard = `BEGIN:VCARD
            ${makeVCardVersion()}
            ${makeVCardInfo(cardInfoEl.value)}
            ${makeVCardName(nameEl.value)}
            ${makeVCardOrg(orgEl.value)}
            ${makeVCardTitle(titleEl.value)}
            ${makeVCardPhoto(previewEl.src)}
            ${makeVCardTel(telEl.value)}
            ${makeVCardAdr(addressEl.value)}
            ${makeVCardEmail(emailEl.value)}
            ${makeVCardTimeStamp()}
            END:VCARD`;
                downloadToFile(vcard, 'vcard.vcf', 'text/vcard');
            }
            
            downloadEl.addEventListener('click', makeVCard);
            fileEl.addEventListener('change', previewFile);

        </script>
        
        <!-- this script tag is for JavaScript -->
        <script>
            (function(){
                function createVcard(contact){
                    // create a vcard file
                    const vcard = `BEGIN:VCARD\nVERSION:4.0\nFN:"${contact.name}"\nTEL;TYPE=work,voice:"${contact.phone}"\nEMAIL:"${contact.email}""\nURL:"${contact.url}"\nEND:VCARD`;
                    const blob = new Blob([vcard], { type: "text/vcard" });
                    const url = URL.createObjectURL(blob);
                    
                    const newLink = document.createElement('a');
                    newLink.download = contact.name + ".vcf";
                    newLink.textContent = contact.name;
                    newLink.href = url;
                    
                    newLink.click();
                }


                // create one of these per line
                document.getElementById("johanContactButton").addEventListener("click", () => {
                    const contact = {
                        name: "Akademia - Johan Lubbe",
                        phone: "+27 861 222 888",
                        email: "johan@akademia.ac.za",
                        url: "https://vbcard.mobi/dummy-page"
                    };

                    createVcard(contact)
                });
            }())
        
        </script>
                
    </body>
</html>