<script>
    (function(){
        function createVcard(contact){
            // create a vcard file
            const vcard = `BEGIN:VCARD\nVERSION:4.0\nFN:"${contact.name}"\nTEL;TYPE=work,voice:"${contact.phone}"\nEMAIL:"${contact.email}""\nURL:"${contact.url}"\nEND:VCARD`;
            const blob = new Blob([vcard], { type: "text/vcard" });
            const url = URL.createObjectURL(blob);

            const newLink = document.createElement('a');
            newLink.download = contact.name + ".vcf";
            newLink.textContent = contact.name;
            newLink.href = url;

            newLink.click();
        }


        // create one of these per line
        document.getElementById("johanContactButton").addEventListener("click", () => {
            const contact = {
                name: "Akademia - Johan Lubbe",
                phone: "+27 861 222 888",
                email: "johan@akademia.ac.za",
                url: "https://vbcard.mobi/dummy-page"
            };

            createVcard(contact)
        });
    }())

</script>